---
layout: layouts/admin.njk
title: Music Library
eleventyExcludeFromCollections: true
---

<style>
  [data-auth-state="loading"] [data-music-wrapper],
  [data-auth-state="logged-out"] [data-music-wrapper],
  [data-auth-state="denied"] [data-music-wrapper] {
    display: none;
  }
  
  [data-auth-state="loading"] [data-auth-check],
  [data-auth-state="logged-out"] [data-auth-check],
  [data-auth-state="denied"] [data-auth-check] {
    display: block;
  }
  
  [data-auth-state="logged-in"] [data-auth-check] {
    display: none;
  }
  
  [data-auth-state="logged-in"] [data-music-wrapper] {
    display: block;
  }
</style>

<div class="admin-container" data-auth-state="loading">
  <div class="admin-header">
    <div style="display: flex; justify-content: space-between; align-items: baseline;">
      <h1>Music Library</h1>
      <a href="/admin/" style="font-size: 0.875rem; color: var(--color-text-muted);">‚Üê Back to Dashboard</a>
    </div>
    <p>Upload and manage your music collection.</p>
  </div>
  
  <div data-auth-check class="not-admin-message">
    <h2>Loading...</h2>
    <p>Checking permissions...</p>
  </div>
  
  <div data-music-wrapper>
    {% enhance %}
      <music-uploader></music-uploader>
    {% endenhance %}
  </div>
</div>

<script>
  // Layout already handles auth - just show content
  const container = document.querySelector('[data-auth-state]');
  container.setAttribute('data-auth-state', 'logged-in');
</script>
